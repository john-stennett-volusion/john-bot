{"version":3,"sources":["robot.js"],"names":[],"mappings":"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","file":"robot-compiled.js","sourcesContent":["'use strict';\n\nlet DOMParser = require('xmldom').DOMParser;\nlet Botkit    = require('botkit');\nlet http      = require('http');\nlet request   = require('request');\nlet Chance    = require('chance');\nlet Secret    = require('./secret.js');\n\nlet chance       = new Chance();\nlet weatherToken = 'bfbb9867aa3f80a7';\nlet slackToken;\n\n// Define the correct Slack Token based on environment.\nif (process.env.SLACK_TOKEN == null) {\n\tslackToken = Secret.slackToken;\n} else {\n\tslackToken = process.env.SLACK_TOKEN;\n}\n\nlet controller = Botkit.slackbot({\n\tdebug: false,\n\tretry: false\n\t//include \"log: false\" to disable logging\n\t//or a \"logLevel\" integer from 0 to 7 to adjust logging verbosity\n});\n\n// Connect the bot to a stream of messages.\nlet bot = controller.spawn({\n\ttoken: slackToken\n});\n\n// Start the bot.\nbot.startRTM((err) => {\n\tif (err) {\n\t\tthrow new Error('Could not connect to Slack!');\n\t}\n});\n\n// Give the bot something to listen for.\ncontroller.hears('hello', ['direct_message', 'direct_mention', 'mention'], (bot, message) => {\n\tbot.reply(message, 'Hello yourself.');\n});\n\ncontroller.hears('help', ['direct_message', 'direct_mention', 'mention'], (bot, message) => {\n\tlet slackMessage = message.text.toLowerCase();\n\n\tif (slackMessage == 'help') {\n\t\tlet helpMessage = '';\n\t\thelpMessage += `\\`\\`\\`hello               - Returns \"Hello yourself\".\\n`;\n\t\thelpMessage += `help                - Returns a list of available commands.\\n`;\n\t\thelpMessage += `weather CITY, STATE - Include CITY, STATE & you'll get the weather.\\n`;\n\t\thelpMessage += `google SEARCH_TERM  - Include a SEARCH_TERM & you'll get a link to Google.\\n`;\n\t\thelpMessage += `lorem               - Returns a random paragraph of Lorem Ipsum.\\n`;\n\t\thelpMessage += `xkcd                - Returns the most recent XKCD comic.\\n`;\n\t\thelpMessage += `xkcd random         - Returns a random XKCD comic.\\n`;\n\t\thelpMessage += `xkcd COMIC_NUMBER   - Returns the specified XKCD comic #.\\`\\`\\``;\n\n\t\tbot.reply(message, helpMessage);\n\t}\n});\n\ncontroller.hears('weather', ['direct_message', 'direct_mention', 'mention'], (bot, message) => {\n\tlet weatherMessage = message.text.toLowerCase();\n\tweatherMessage = weatherMessage.replace('weather', '').split(',');\n\n\tlet city = weatherMessage[0].trim().replace(' ', '_');\n\tlet state = weatherMessage[1].trim();\n\n\tlet weatherUri = `/api/${weatherToken}/forecast/q/${state}/${city}.json`;\n\n\thttp.get({\n\t\thost: 'api.wunderground.com',\n\t\tpath: weatherUri\n\t}, (response) => {\n\t\tlet weatherBody = '';\n\n\t\tresponse.on('data', (d) => {\n\t\t\tweatherBody += d;\n\t\t});\n\t\tresponse.on('end', () => {\n\t\t\tlet weatherData = JSON.parse(weatherBody);\n\t\t\tlet weatherDays = weatherData.forecast.simpleforecast.forecastday;\n\n\t\t\tfor (let i=0; i < weatherDays.length; i++) {\n\t\t\t\tlet weatherDay = `*${weatherDays[i].date.weekday}*`;\n\t\t\t\tlet weatherHigh = `*High*: ${weatherDays[i].high.fahrenheit}`;\n\t\t\t\tlet weatherLow = `*Low*: ${weatherDays[i].low.fahrenheit}`;\n\t\t\t\tlet weatherConditions = `*Conditions*: ${weatherDays[i].conditions}`;\n\t\t\t\tlet weatherMessage = `${weatherDay} - ${weatherHigh} - ${weatherLow} - ${weatherConditions}`;\n\n\t\t\t\tbot.reply(message, weatherMessage);\n\t\t\t}\n\t\t});\n\t});\n});\n\ncontroller.hears('google', ['direct_message', 'direct_mention', 'mention'], (bot, message) => {\n\tlet googleMessage = message.text.toLowerCase().replace('google', '');\n\tgoogleMessage     = googleMessage.slice(1, googleMessage.length).replace(/ /g, '+');\n\n\tlet googleUrl = `https://www.google.com/#q=${googleMessage}`;\n\n\tbot.reply(message, googleUrl);\n});\n\ncontroller.hears('xkcd', ['direct_message', 'direct_mention', 'mention'], (bot, message) => {\n\tlet xkcdMessage = message.text.toLowerCase().replace('xkcd', '');\n\txkcdMessage = xkcdMessage.slice(1, xkcdMessage.length);\n\tlet comicUrl;\n\n\tlet sendMessage = (url) => {\n\n\t\tif (xkcdMessage.length == 0) {\n\t\t\tcomicUrl = 'http://xkcd.com/info.0.json';\n\t\t} else if (typeof xkcdMessage == \"number\") {\n\t\t\tcomicUrl = `http://xkcd.com/${xkcdMessage}/info.0.json`;\n\t\t} else {\n\t\t\tcomicUrl = url;\n\t\t}\n\n\t\trequest.post({\n\t\t\turl: comicUrl\n\t\t}, (err, httpResponse, body) => {\n\t\t\tlet replyBody = JSON.parse(body);\n\t\t\tlet title = replyBody.safe_title;\n\t\t\tlet alt = replyBody.alt;\n\t\t\tlet image = replyBody.img;\n\n\t\t\tbot.reply(message, ('*' + title + '*'));\n\t\t\tbot.reply(message, (image + '\\n' + alt));\n\t\t});\n\t};\n\n\trequest.post({\n\t\turl: 'http://xkcd.com/info.0.json'\n\t}, (err, httpResponse, body) => {\n\t\tlet replyBody = JSON.parse(body);\n\t\tlet totalComicCount = String(replyBody.num);\n\n\t\tlet randomComicNumber = chance.integer({\n\t\t\tmin: 1,\n\t\t\tmax: Number(totalComicCount)\n\t\t});\n\n\t\tlet randomUrl = `http://xkcd.com/${randomComicNumber}/info.0.json`;\n\n\t\tsendMessage(randomUrl);\n\t});\n\t\n});\n\ncontroller.hears('ch', ['direct_message', 'direct_mention', 'mention'], (bot, message) => {\n\tlet chMessage = message.text.toLowerCase().replace('ch', '');\n\n\tif (chMessage.length == 0) {\n\t\trequest.post({\n\t\t\turl: 'http://explosm.net/comics/latest/'\n\t\t}, (err, httpResponse, body) => {\n\t\t\tlet data = body;\n\t\t\tlet parse = new DOMParser();\n\t\t\tlet htmlDoc = parse.parseFromString(data, \"text/html\");\n\t\t\tlet image = htmlDoc.getElementById('main-comic');\n\t\t\tlet address = image.getAttribute('src');\n\n\t\t\tbot.reply(message, address);\n\t\t});\n\t}\n});"]}